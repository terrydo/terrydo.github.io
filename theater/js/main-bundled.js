"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}/* ==========================================================================
   Utilities
   ========================================================================== */var AppUtils=/*#__PURE__*/function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"splitText",value:function splitText(a){for(var b=a.length,c=[],d=0;d<b;d++)c.push(a[d]);return c}},{key:"generateDOMWordAndLetters",value:function generateDOMWordAndLetters(a){for(var b=[],c=a.split(" "),d=0;d<c.length;d++){var e=c[d],f=document.createElement("span");f.className="ani-word";for(var k=0;k<e.length;k++){var g=e[k],h=document.createElement("span");h.innerHTML=" "===g?"&nbsp;":g,h.className="ani-letter",f.appendChild(h)}b.push(f)}return b}},{key:"appendSplittedTextDOM",value:function appendSplittedTextDOM(a,b){a.innerHTML="";for(var c,d=0;d<b.length;d++)c=b[d],a.appendChild(c);return a.querySelectorAll(".ani-letter")}},{key:"animateNumber",value:function animateNumber(a){function b(){c=new Date-f,d=c/e}var c,d,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2e3,f=new Date,g=parseInt(a.innerHTML),h=setInterval(function(){var e=Math.floor;b(),1<d&&(d=1);var i=e(g*d);a.innerHTML=i,1===d?clearInterval(h):(c=new Date,d=f/c)},1e3/30)}}]),a}(),MainApp=/*#__PURE__*/function(){function a(){// Chỉ chạy khi ở trang chủ.
_classCallCheck(this,a),this.initMobileMenu(),1>$("#home").length}return _createClass(a,[{key:"initInview",value:function initInview(a,b){function c(a){e.removeClass("inview-animate");var c=e.find(".inview-animate");c.removeClass("inview-animate"),b(e,a),g.destroy()}var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"enter";if("function"==typeof b){var e=$(a),f={element:e[0]};f[d]=c;var g=new Waypoint.Inview(f)}}},{key:"initMobileMenu",value:function initMobileMenu(){var a=$("#mobile-menu"),b=$("#open-menu"),c=$("#close-menu"),d=function(){var b=new TimelineMax;b.to(a,.7,{yPercent:0,ease:Power1.easeOut}),b.staggerFromTo($(".app-mobile-menu__nav > li"),.5,{y:-25,opacity:0},{y:0,opacity:1},.05,"-=0.3"),b.call(function(){c.addClass("app-close-svg--animate")},null,null,"-=0.2")},e=function(b){var d=new TimelineMax({onComplete:function onComplete(){"function"!=typeof b||b()}});d.call(function(){c.removeClass("app-close-svg--animate")}),d.to(a,.7,{yPercent:-100,ease:Power1.easeOut},"+=0.5")};TweenMax.set(a,{yPercent:-100}),a.removeClass("app-mobile-menu--hidden"),b.click(function(){window.slider&&window.slider.pause(),d()}),c.click(function(){window.slider&&window.slider.resume(),e(function(){window.slider&&window.slider.resume()})})}},{key:"initHomeSlider",value:function initHomeSlider(){1>$("#slider").length||(window.slider=new Slider($("#slider")[0],{debug:!1,duration:1.5,autoplay:!0}),$("#slider-next").click(function(){slider.navigateSlide("next")}),$("#slider-prev").click(function(){slider.navigateSlide("prev")}))}},{key:"initHomeVideo",value:function initHomeVideo(){var a=$("#home-intro-video"),b={techOrder:["youtube"],sources:[{type:"video/youtube",src:a.prop("src")}],youtube:{iv_load_policy:1}},c=videojs(a[0],b);c.on("ready",function(){$(c).addClass("ready")})}},{key:"initOnScrollHomeAbout",value:function initOnScrollHomeAbout(){var a=this,b=new SimpleTransition("home-about-image-wrapper"),c=$("body").find(".app-home-about__heading"),d=c.text(),e=$(".app-home-about__milestones"),f=$(".app-home-about__heading"),g=$(".app-home-about__milestones .app-milestone__number"),h=[2e3,1500,1e3],i=AppUtils.generateDOMWordAndLetters(d),j=AppUtils.appendSplittedTextDOM(c[0],i);TweenMax.set(e,{opacity:0}),b.onLoadedImages(function(){a.initInview("#home-about",function(){b.start();var a=new TimelineMax({repeat:0});a.fromTo(b.data,1.2,{progress:0},{progress:1,ease:Power4.easeOut}),a.addLabel("start"),a.call(function(){b.destroy()},null,"start"),a.staggerFromTo(j,.35,{opacity:0,x:-25},{opacity:1,x:0},.035,"start"),a.fromTo($(".app-home-about__intro"),.5,{opacity:0,y:-15},{opacity:1,y:0}),a.addLabel("milestones"),a.fromTo(e,.5,{opacity:0,y:-15},{opacity:1,y:0}),a.call(function(){g.each(function(a,b){AppUtils.animateNumber(b,h[a])})},null,null,"milestones")},"entered")})}},{key:"initOnScrollHomeQuote",value:function initOnScrollHomeQuote(){this.initInview("#home-quote",function(a){TweenMax.fromTo(a,1,{y:15,opacity:0},{y:0,opacity:1})})}},{key:"initOnScrollHomeVideo",value:function initOnScrollHomeVideo(){this.initInview("#home-video",function(a){TweenMax.fromTo(a,1,{opacity:0},{opacity:1})},"entered")}},{key:"initOnScrollHomeFeaturedFilms",value:function initOnScrollHomeFeaturedFilms(){this.initInview("#home-featured-films",function(a){TweenMax.fromTo(a,1,{y:15,opacity:0},{y:0,opacity:1})})}},{key:"initOnScrollHomeCta",value:function initOnScrollHomeCta(){this.initInview("#home-cta",function(){var a=new TimelineMax,b=$(".app-home-cta__text"),c=AppUtils.generateDOMWordAndLetters(b.text()),d=AppUtils.appendSplittedTextDOM(b[0],c);a.staggerFromTo(d,.35,{opacity:0,x:-25},{opacity:1,x:0},.035),a.fromTo($(".app-home-cta__buttons"),1,{opacity:0},{opacity:1})},"entered")}},{key:"initOnScrollHomeSocialFollow",value:function initOnScrollHomeSocialFollow(){this.initInview("#home-social-follow",function(a){TweenMax.fromTo(a,1,{opacity:0},{opacity:1})})}},{key:"initOnScrollHomeContact",value:function initOnScrollHomeContact(){var a=this,b=$(".app-home-contact__content-inner"),c=new TimelineMax({repeat:0});c.set(b,{opacity:0});var d=new SimpleTransition("home-contact-image-wrapper",{position:{top:"0",right:"0",left:"auto",bottom:"auto"}});d.onLoadedImages(function(){a.initInview("#home-contact",function(){d.start(),c.fromTo(d.data,1.2,{progress:0},{progress:1,ease:Power4.easeOut}),c.addLabel("start"),c.call(function(){d.destroy()},null,"start"),c.to(b,1,{opacity:1})},"entered")})}}]),a}(),showContent=function(){var a=new MainApp;a.initOnScrollHomeAbout(),a.initOnScrollHomeQuote(),a.initOnScrollHomeVideo(),a.initHomeVideo(),a.initOnScrollHomeFeaturedFilms(),a.initOnScrollHomeCta(),a.initOnScrollHomeSocialFollow(),a.initOnScrollHomeContact();var b=$(".preloader"),c=$("body");TweenMax.fromTo(b,1,{opacity:1},{opacity:0,delay:.5,// Delay để CPU nghỉ ngơi
onComplete:function onComplete(){b.remove(),c.removeClass("overflow-hidden"),setTimeout(function(){a.initHomeSlider()},500)}})},appConfigs={preloaderDuration:2e3// Phải chỉnh khớp với thời gian animation trong css!
},appState={isAnimationFinished:!1,isWindowLoaded:!1},timeout=setTimeout(function(){appState.isAnimationFinished=!0,!0===appState.isWindowLoaded&&showContent(),clearTimeout(timeout)},appConfigs.preloaderDuration);/* ==========================================================================
   Main functions
   ========================================================================== */window.addEventListener("load",function(){appState.isWindowLoaded=!0,!0===appState.isAnimationFinished&&showContent()});
